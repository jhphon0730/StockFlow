# 개발 흐름

```
Go, GORM 및 WebSocket 통합을 활용하여 실시간 업데이트 기능을 제공하는 창고 관리 시스템 구축을 위한 추천 개발 흐름 및 기능 구현 순서를 개략적으로 설명합니다.
```

---

## 1. 환경 설정 및 프로젝트 구성
- **Go 환경 설정:**  
  - [x] Go, GORM 및 필요한 패키지를 설치합니다.
  - [x] 프로젝트 구조를 구성하고 필수 디렉터리를 생성합니다.
- **환경 변수 구성:**  
  - [x] `.env` 파일에 구성 세부 정보(예: 데이터베이스 URL, JWT 비밀 키 등)를 설정합니다.

---

## 2. 데이터베이스 모델링 및 ERD 구현
- **데이터 모델 정의:**  
  - [x] GORM을 사용하여 사용자(Users), 창고(Warehouses), 제품(Products), 재고(Inventory), 주문(Orders), 주문 항목(OrderItems) 및 트랜잭션(Transactions)에 대한 모델을 생성합니다.
- **데이터베이스 스키마 마이그레이션:**  
  - [x] ERD를 기반으로 데이터베이스 마이그레이션을 생성 및 실행합니다.
- **관계 설정:**  
  - [x] 재고(Inventory)와 창고(Warehouses), 제품(Products)를 연결하는 등 적절한 외래 키 관계 및 인덱스를 설정합니다.

---

## 3. 사용자 인증 및 역할 기반 접근 제어 (RBAC)
- **회원가입 및 로그인 구현:**  
  - [x] 사용자 회원가입 및 로그인을 위한 엔드포인트를 생성합니다.
- **JWT 기반 인증:**  
  - [x] 로그인 성공 시 JWT 토큰을 발급하여 API를 보호합니다.
- **역할 관리:**  
  - [x] 직원(staff) 역할을 정의하고 API 엔드포인트에 접근 제어를 적용합니다.
  - [] 관리자(admin) 역할을 정의하고 API 엔드포인트에 접근 제어를 적용합니다.

---

## 4. 창고 및 제품에 대한 CRUD API
- **창고 API:**  
  - [x] 창고 기록을 생성, 조회, 수정, 삭제하는 엔드포인트를 개발합니다.
- **제품 API:**  
  - [x] 고유 SKU 관리를 포함하여 제품 정보를 관리하는 엔드포인트를 개발합니다.
- **유효성 검사 및 오류 처리:**  
  - [x] 입력 값 유효성 검사 및 오류 응답을 적절히 처리합니다.

---

## 5. 재고 관리
- **초기 재고 설정:**  
  - [x] 각 창고의 각 제품에 대해 재고 기록을 초기화하는 기능을 구현합니다.
- **재고 업데이트:**  
  - [x] 입고, 출고 또는 조정 시 재고를 업데이트하는 API를 개발합니다.
- **데이터 일관성:**  
  - [x] 재고 업데이트 시 트랜잭션을 사용하여 데이터 무결성을 유지합니다.
- **실시간 동기화 (이후 WebSocket을 통해):**  
  - [x] 재고 변경이 발생할 때 실시간 업데이트를 계획합니다.

---

## 6. 주문 처리 로직
- **주문 생성:**  
  - 주문 및 주문 항목을 기록하는 엔드포인트를 구축합니다.
- **재고 차감:**  
  - 주문 생성 시 해당 재고 수량을 차감하는 주문 처리와 재고 관리의 통합을 구현합니다.
- **주문 상태 관리:**  
  - 주문의 상태 전환(예: 대기, 처리 중, 발송, 배송 완료)을 구현합니다.
- **동시성 제어:**  
  - 재고 차감 시 경쟁 조건을 방지하기 위해 락(lock) 또는 트랜잭션 메커니즘을 구현합니다.

---

## 7. 트랜잭션 로깅 (재고 이동 기록)
- **모든 재고 변경 기록:**  
  - [x] 입고, 출고, 조정 등 모든 재고 수정 사항을 트랜잭션 테이블에 기록합니다.
- **감사 추적:**  
  - [x] 각 트랜잭션 기록에 수량, 유형, 타임스탬프 등 관련 세부 정보를 포함시킵니다.

---

## 8. WebSocket을 통한 실시간 통신
- **WebSocket 서버 설정:**  
  - 클라이언트와의 지속적인 연결을 유지하는 WebSocket 서버를 구현합니다.
- **실시간 이벤트 브로드캐스팅:**  
  - 재고 변경, 주문 상태 업데이트, 중요 알림 등의 이벤트에 대해 WebSocket 이벤트를 통합합니다.
- **보안 고려사항:**  
  - WebSocket 연결에 대해 인증(JWT 토큰 검증 등)을 강화합니다.

---

## 9. 대시보드 및 알림 통합
- **대시보드 통합:**  
  - 실시간 데이터를 시각화하기 위한 프론트엔드 대시보드 개발 또는 통합을 수행합니다.
- **실시간 알림:**  
  - 재고 부족, 주문 완료 및 주요 관리자 알림 등 이벤트에 대해 실시간 알림을 구현합니다.
- **사용자 인터페이스:**  
  - WebSocket으로 푸시되는 데이터를 통해 사용자가 수동으로 새로 고침하지 않아도 대시보드가 업데이트되도록 합니다.

---

## 10. 테스트 및 통합 검증
- **단위 및 통합 테스트:**  
  - [x] 개별 API 및 통합 워크플로에 대한 테스트를 작성합니다.
- **부하 테스트:**  
  - 특히 실시간 기능에서 동시 사용자 상황 하에서 시스템 안정성을 검증합니다.
- **데이터 일관성 검사:**  
  - 고부하 상황에서도 트랜잭션 및 재고 업데이트가 일관성을 유지하는지 확인합니다.

---

## 11. 최적화 및 배포 준비
- **성능 최적화:**  
  - 데이터베이스 쿼리를 최적화하고 Redis와 같은 캐싱 전략을 고려합니다.
- **코드 리팩토링:**  
  - 유지보수성과 확장성을 위해 코드를 정리하고 리팩토링합니다.
- **CI/CD 파이프라인:**  
  - 지속적인 통합 및 배포 파이프라인을 구축합니다.
- **배포:**  
  - 모든 보안 조치를 갖춘 상태에서 애플리케이션을 프로덕션 환경에 배포할 준비를 합니다.

---

## 요약

1. **환경 설정 및 데이터베이스 모델링:** 프로젝트 기반을 마련하고 데이터 구조를 정의합니다.
2. **인증 및 기본 CRUD 구현:** API 보안을 확보하고 창고 및 제품에 대한 핵심 CRUD 기능을 구현합니다.
3. **재고 및 주문 관리:** 트랜잭션 관리를 통한 재고 처리 및 주문 처리 비즈니스 로직을 구축합니다.
4. **실시간 통합:** 실시간 업데이트 및 알림 기능을 위해 WebSocket을 통합합니다.
5. **테스트 및 최적화:** 배포 전 시스템의 견고함을 보장하고 성능을 최적화합니다.

이 구조화된 접근 방식은 핵심 시스템이 안정적이고, 보안성이 높으며, 확장 가능하도록 보장하며, 실시간 기능의 원활한 통합을 통해 창고 관리 시스템에 상당한 가치를 더합니다.

---

# 사용자 흐름 (웹 기반)
```
회원가입 및 로그인

1. 사용자는 회원가입을 진행한다.
관리자는 특정 권한을 가진 계정을 생성할 수 있다.
로그인 시, JWT 또는 세션을 통해 인증이 이루어진다.
창고 및 재고 관리

2. 관리자는 창고(Warehouse)를 추가하고, 창고 내 인벤토리(Inventory)를 설정한다.
창고 직원은 특정 창고에 대한 접근 권한을 부여받는다.
상품 등록 및 입고

3. 관리자는 상품(Item)을 등록한다.
등록된 상품을 입고(Stock In) 처리하면서 재고 수량(InventoryStock)이 증가한다.
상품 출고 및 주문 관리

4. 고객(또는 내부 시스템)이 주문(Order)을 생성한다.
주문이 승인되면 출고(Stock Out) 처리가 진행된다.
출고된 상품은 배송(Shipping) 정보가 업데이트된다.
실시간 재고 관리 (WebSocket 활용)

5. 창고 직원이나 관리자가 재고를 실시간으로 모니터링한다.
특정 재고 수량이 임계치 이하로 떨어지면 경고 알림을 받는다.
다른 사용자들이 상품 출고를 하면 즉시 UI가 업데이트된다.
통계 및 리포트

6. 특정 기간 동안의 입출고 현황을 분석한다.
재고 회전율, 품절 위험 품목 등을 리포트로 제공한다.
```
